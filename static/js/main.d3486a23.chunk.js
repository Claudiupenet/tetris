(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports=n(18)},16:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(4),o=n.n(i),c=(n(16),n(2)),s=n(1),l=n(5),u=n(6),y=n(8),v=n(7),x=n(9),f=(n(17),[[[{x:0,y:6},{x:0,y:5},{x:1,y:5},{x:2,y:5}],[{x:1,y:6},{x:0,y:6},{x:0,y:5},{x:0,y:4}],[{x:2,y:5},{x:2,y:6},{x:1,y:6},{x:0,y:6}],[{x:0,y:4},{x:1,y:4},{x:1,y:5},{x:1,y:6}]],[[{x:0,y:5},{x:0,y:6},{x:1,y:6},{x:2,y:6}],[{x:0,y:6},{x:1,y:6},{x:1,y:5},{x:1,y:4}],[{x:2,y:6},{x:2,y:5},{x:1,y:5},{x:0,y:5}],[{x:1,y:4},{x:0,y:4},{x:0,y:5},{x:0,y:6}]],[[{x:0,y:6},{x:1,y:6},{x:1,y:5},{x:2,y:5}],[{x:0,y:4},{x:0,y:5},{x:1,y:5},{x:1,y:6}]],[[{x:0,y:5},{x:1,y:5},{x:1,y:6},{x:2,y:6}],[{x:0,y:6},{x:0,y:5},{x:1,y:5},{x:1,y:4}]],[[{x:0,y:4},{x:0,y:5},{x:0,y:6},{x:0,y:7}],[{x:0,y:5},{x:1,y:5},{x:2,y:5},{x:3,y:5}]],[[{x:0,y:5},{x:0,y:6},{x:1,y:5},{x:1,y:6}]],[[{x:0,y:5},{x:1,y:4},{x:1,y:5},{x:1,y:6}],[{x:1,y:6},{x:0,y:5},{x:1,y:5},{x:2,y:5}],[{x:1,y:5},{x:0,y:4},{x:0,y:5},{x:0,y:6}],[{x:1,y:4},{x:0,y:5},{x:1,y:5},{x:2,y:5}]]]),m={active:JSON.parse(JSON.stringify(f[Math.floor(Math.random()*f.length)])),position:0,blocked:[],isRunning:!1,level:1,streak:0},d=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(y.a)(this,Object(v.a)(t).call(this))).move=function(){if(e.state.isRunning){var t=JSON.parse(JSON.stringify(e.state.active));t.map(function(e){return e.map(function(e){return e.x++})});var n=e.checkIfBlocked(t[e.state.position],e.state.blocked),a=e.checkEndGame(t[e.state.position]);if(n&&a)e.endGame();else if(n){var r=[].concat(Object(s.a)(e.state.blocked),Object(s.a)(e.state.active[e.state.position]));if(r=e.evaluateBlocked(r),e.reevaluate)return e.setActive(7),void e.setState({blocked:r});f.splice(7,1),e.setActive(),e.setState({blocked:r})}else e.setState({active:t})}},e.checkIfBlocked=function(e,t){return e.some(function(e){return!(!t.some(function(t){return t.x===e.x&&t.y===e.y})&&25!==e.x)})},e.evaluateBlocked=function(t){var n=JSON.parse(JSON.stringify(t)),a=[];t.reduce(function(e,t){return e[t.x]&&11===e[t.x].length?a.push(t.x):e[t.x]?e[t.x].push(t.y):e[t.x]=[t.y],e},{});var r=[];return a.length>0?(e.processLevel(a.length),a.map(function(e){return n=n.filter(function(t){return t.x<e&&r.push(t),t.x!==e&&t.x>e})}),e.reevaluate=!0,f[7]=[r]):e.reevaluate&&(e.reevaluate=!1),n},e.processLevel=function(t){if(10!==e.state.level){var n=null;n=1===t?1:2===t?3:3===t?5:7;var a=e.state.streak+n,r=e.state.level;a>9&&r>8?(a=20,r=10):a>9&&(a%=10,r++),e.state.level!==r?(clearInterval(e.timer),e.timer=setInterval(e.move,30*(11-r)),e.setState({streak:a,level:r})):e.setState({streak:a})}},e.checkEndGame=function(e){return e.some(function(e){return 1===e.x})},e.changeActive=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(console.log("changeactive"),e.state.isRunning){"w"!==t.key&&"ArrowUp"!==t.key&&"rotate"!==n||e.changePosition();var a=null;if("a"===t.key||"ArrowLeft"===t.key||"left"===n)a=-1;else if("d"===t.key||"ArrowRight"===t.key||"right"===n)a=1;else{if("s"!==t.key&&"ArrowDown"!==t.key&&"down"!==n)return;a=0}var r=JSON.parse(JSON.stringify(e.state.active));r.map(function(e){return e.map(function(e){return 0===a?e.x++:e.y=e.y+a,e})}),r[e.state.position].some(function(t){return-1===t.y||12===t.y||25===t.x||e.state.blocked.some(function(e){return e.y===t.y&&e.x===t.x})})||e.setState({active:r})}},e.changePosition=function(){var t=e.state.active.length-1,n=e.state.position;t>e.state.position?n++:n=0;var a=JSON.parse(JSON.stringify(e.state.active)),r=!1;a=a.map(function(e){return e.map(function(t){return t.y<0?(e.map(function(e){return e.y++}),r=!0):t.y>11&&(e.map(function(e){return e.y--}),r=!0),t}),e}),r?e.setState({active:a,position:n}):e.setState({position:n})},e.setActive=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===t){var n=f[Math.floor(Math.random()*f.length)];e.setState({active:n,position:0})}else e.setState({active:f[t],position:0})},e.getCellType=function(t,n){var a=e.state.active[e.state.position].some(function(e){return e.x===t&&e.y===n}),r=e.state.blocked.some(function(e){return e.x===t&&e.y===n});return a?"active":r?"blocked":"empty"},e.startGame=function(){e.state.isRunning?(clearInterval(e.timer),e.setState({isRunning:!1})):(e.timer=setInterval(e.move,30*(11-e.state.level)),e.setState({isRunning:!0}))},e.restart=function(){clearInterval(e.timer),e.timer=setInterval(e.move,30*(11-m.level)),document.getElementById("lostMessage").style.display="none",e.setState(Object(c.a)({},m,{isRunning:!0}))},e.endGame=function(){e.setState({isRunning:!1}),document.getElementById("lostMessage").style.display="block",clearInterval(e.timer)},e.area=Array(25).fill(Array(12).fill(null)),e.state=Object(c.a)({},m),e.timer=null,e.timer2=null,e.reevaluate=!1,e}return Object(x.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.changeActive)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"wrapper"},r.a.createElement("div",{id:"lostMessage"},"You lost. Click restart to play again!",r.a.createElement("button",{onClick:function(){return e.restart()}},"Restart")),r.a.createElement("div",{className:"area"},this.area.map(function(t,n){return r.a.createElement("div",{className:"linie",key:n},t.map(function(t,a){return r.a.createElement("div",{className:e.getCellType(n,a),key:n.toString()+" "+a.toString()})}))})),r.a.createElement("div",{id:"info"},r.a.createElement("span",{id:"level"},"Level: ",this.state.level<10?this.state.level:"Max (10)"),r.a.createElement("span",{id:"streak"},"Streak: ",this.state.level<10?this.state.streak:"Max"),r.a.createElement("button",{id:"startButton",onClick:function(){return e.startGame()}},this.state.isRunning?"Pause":"Start"),("undefined"!==typeof window.orientation||-1!==navigator.userAgent.indexOf("IEMobile"))&&r.a.createElement("div",{id:"controls"},r.a.createElement("button",{className:"displayBlockButton",onMouseDown:function(t){return setInterval(e.changeActive(t,"rotate"),30)}}," \u267a"),r.a.createElement("button",{onTouchStart:function(t){e.timer2=setInterval(function(){return e.changeActive(t,"left")},100),e.changeActive(t,"left")},onTouchEnd:function(){return clearInterval(e.timer2)}},"\u2190"),r.a.createElement("button",{onTouchStart:function(t){e.timer2=setInterval(function(){return e.changeActive(t,"right")},100),e.changeActive(t,"right")},onTouchEnd:function(){return clearInterval(e.timer2)}},"\u2192"),r.a.createElement("button",{className:"displayBlockButton",onTouchStart:function(t){return e.timer2=setInterval(function(){return e.changeActive(t,"down")},100)},onTouchEnd:function(){return clearInterval(e.timer2)}},"\u2193"))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(d,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,1,2]]]);
//# sourceMappingURL=main.d3486a23.chunk.js.map